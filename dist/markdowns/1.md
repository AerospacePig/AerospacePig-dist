## 24年3月9日立项, 3月12日部署本博客

源码: (https://github.com/AerospacePig/AerospacePig)

### 简单介绍

静态博客嘛, 本身也没用到什么复杂技术, UI也是直接模仿[@NiceBowl](https://nicebowl.fun/)的博客, 当初看到这个作者的博客那精简的UI一眼就爱上了, 所以自己用Vue3也模仿了一个...(我已经尽可能去还原了), 但还有一些需求没能实现, 也不想再整了, 比如说评论系统, 要实现这个需求肯定就得制作登陆系统, 就涉及到用户信息管理...

想了想, 没必要, 毕竟一开始我就打算这个博客专为我个人打造, 为我个人而生, 所以写代码的时候所有习惯都按我自己的来(只要我看的懂就好...笑), 在这个前提下开发这样一个静态网站, 那速度就快了。

这个网站舍去了所有花里胡哨的东西, 只保留了最纯粹, 最基本的博客功能, 文章内容直接用Markdown文件, 元数据用json, 毕竟一开始也是冲着这一点才制作的, UI也是坚持了最精简的设计。

OK, 接下来总结下关于部署过程中遇到的问题吧。

### 域名购买之后的实名认证问题

私以为经过这次部署之后, 估计以后我不会再购买国内域名商的域名了, *身份证正反面拍照详细地址电话人脸识别短信验证邮箱验证注册局验证...*我就花8块钱买来的域名, 结果搞得像自己里里外外都被扒光了一样, 以为我能用这东西干什么?!

但因为好歹花了我整整8个软妹币, 只好硬着头皮整了两个小时才完成认证, 中途第一次注册局还审核失败, 说我身份证照片模糊他认不到, 第二次才成功, 而审核一次40分钟...

### 域名解析

需要添加DNS记录, 这里要吸取一个经验, 即记录添加之后可能真要等10分钟左右(大多数情况不用), 它才会更新, 而更新前刷新会一直显示解析错误。

### 添加SSL证书

为了提升网站逼格, 也因为http的危险警告实在不优雅, 所以SSL证书是不可少的, 当然我呢, 肯定是用免费的就好, 尽管国内像阿里云这些都可以申请免费SSL服务, 但最终还是决定用Let's Encrypt, 整这个东西我走了很多弯路, 先是搭Linux虚拟环境, 后安装Nginx, 然后反应过来我是GitHub Page上挂的, 我整这些干嘛, OK, 直接用Certbot...键入命令, 写入记录, 重新解析...呼~ 完成!

### 部署时路径问题

这个最好是在写代码时就注意(也算涨了经验), 不然相信会被404整无语.

```javascript
process.env.NODE_ENV === 'production'
```

### 记录下Let's Encrypt的SSL证书申请流程:

```bash
Linux环境下(确保必要的依赖已经装上):

1. yum install epel-release -y
2. yum install certbot -y
3. certbot certonly -d *.[域名] --manual --preferred-challenges dns <!-- 这个申请的是泛域名 -->
4. certbot certonly -d [主域名] --manual --preferred-challenges dns <!-- 这个是主域名, 理论上3, 4执行一条即可 -->
```

- 之后不出意外会生成俩文件, 外加一串密钥, 需要回到域名商解析处在目标域名下添加一个主机记录为_acme-challenge, 记录类型为TXT, 记录值为密钥值的DOS记录, 再回到终端键下Enter...OK
之后就回到GitHub Page等着载入新的DOS记录, 安装证书什么的他已经自动执行了.

- 最后就是证书续签问题, 有效期三个月, 需提前重复上面步骤4.5重新申请, (不过官方好像有自动续签的hook, 懒得整了)
